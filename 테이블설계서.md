# 테이블 설계서

> [임성준](https://www.github.com/Seong-Jun1525), [윤석준](https://www.github.com/free3510877)

## MEMBER 회원 테이블

> 데이터 컬럼

| 컬럼명           |  데이터타입   | 설명                                                   |                         제약조건                          |
| :--------------- | :-----------: | :----------------------------------------------------- | :-------------------------------------------------------: |
| MEM_NO           |    NUMBER     | 회원번호, 시퀀스 사용                                  |                        PRIMARY KEY                        |
| MEM_ID           | VARCHAR2(30)  | 사용자 식별 값(API에서 제공 UID)                       |                          UNIQUE                           |
| MEM_EMAIL        | VARCHAR2(100) | 회원이메일, 필수항목                                   |                     UNIQUE, NOT NULL                      |
| MEM_PASSWORD     | VARCHAR2(30)  | 회원비밀번호                                           |                         NOT NULL                          |
| REFRESH_TOKEN    | VARCHAR2(30)  | 리프레쉬 토큰                                          |                          UNIQUE                           |
| PLATFORM         | VARCHAR2(30)  | DEFAULT 'NORMAL'                                       | CHECK(PLATFORM IN ('NORMAL'. 'KAKAO', 'GOOGLE', 'NAVER')) |
| MEM_ADDRESS      | VARCHAR2(100) | 필수항목                                               |                         NOT NULL                          |
| BIRTHDAY         |     DATE      | 회원생년월일                                           |                                                           |
| MEM_PHONE        | VARCHAR2(20)  | 필수항목                                               |                         NOT NULL                          |
| NICKNAME         | VARCHAR2(30)  | 기본값 이메일 + 난수 자바로 처리                       |                          UNIQUE                           |
| REGISTERED_DATE  |     DATE      | DEFAULT SYSDATE, 가입날짜                              |                         NOT NULL                          |
| UPDATED_DATE     |     DATE      | 정보수정 날짜                                          |                                                           |
| STATUS           | VARCHAR2(10)  | DEFAULT 'ACTIVE'. 활성화-'ACTIVE', 비활성화-'INACTIVE' |                         NOT NULL                          |
| DEACTIVATED_DATE |     DATE      | 비활성화 날짜                                          |                                                           |

## MEMBER_EXPERIENCE 회원 경험치 내역 테이블

> 데이터 컬럼

| 컬럼명        | 데이터타입 | 설명                       |                       제약조건                        |
| :------------ | :--------: | :------------------------- | :---------------------------------------------------: |
| MEM_EXP_NO    |   NUMBER   | 경험치 내역 번호           |                      PRIMARY KEY                      |
| MEM_EXP_VALUE |   NUMBER   | DEFAULT 0, 획득 경험치     |                       NOT NULL                        |
| MEM_EXP_DATE  |    DATE    | DEFAULT SYSDATE, 획득 날짜 |                       NOT NULL                        |
| MEM_NO        |   NUMBER   | 회원번호, 시퀀스 사용      |         FOREIGN KEY MEM_NO REFERENCES MEMBER          |
| RES_CODE      |   NUMBER   | 예약코드                   | FOREIGN KEY RES_CODE REFERENCES RESERVATION, NOT NULL |

## ACCOMMODATION 숙박업소 테이블

> 데이터 컬럼

| 컬럼명                      |  데이터타입   | 설명                    |  제약조건   |
| :-------------------------- | :-----------: | :---------------------- | :---------: |
| ACC_NO                      |    NUMBER     | 숙박업소번호            | PRIMARY KEY |
| ACC_NAME                    | VARCHAR2(50)  | 숙박업소명              |  NOT NULL   |
| ACC_DESCRIPTION             | VARCHAR(255)  | 숙박업소 설명           |  NOT NULL   |
| ACC_ORIGINAL_IMG_NAME       | VARCHAR2(100) | 이미지 원본 이름        |  NOT NULL   |
| ACC_CHANGE_IMG_NAME         | VARCHAR2(100) | 이미지 경로             |  NOT NULL   |
| ACC_LATITUDE                |    NUMBER     | 위도                    |  NOT NULL   |
| ACC_LONGITUDE               |    NUMBER     | 경도                    |  NOT NULL   |
| REGISTERED_DATE             |     DATE      | DEFAULT SYSDATE, 등록일 |  NOT NULL   |
| ACC_ADDRESS                 | VARCHAR2(100) | 주소                    |  NOT NULL   |
| ACC_PHONE                   | VARCHAR2(20)  | 전화번호                |  NOT NULL   |
| ACC_PUBLIC_FACILITIES_INFO  | VARCHAR2(100) | 공용편의시설정보        |             |
| ACC_IN_ROOM_FACILITIES_INFO | VARCHAR2(100) | 객실 내 시설 정보       |             |
| ACC_ETC_FACILITIES_INFO     | VARCHAR2(100) | 기타시설정보            |             |
| ACC_TYPE                    | VARCHAR2(20)  | 숙소유형                |  NOT NULL   |

## ROOM 객실 테이블

> 데이터 컬럼

| 컬럼명                 |  데이터타입   | 설명                    |                       제약조건                        |
| :--------------------- | :-----------: | :---------------------- | :---------------------------------------------------: |
| ROOM_NO                |    NUMBER     | 객실번호(객실호수X)     |                      PRIMARY KEY                      |
| ROOM_NAME              | VARCHAR2(50)  | 객실명                  |                       NOT NULL                        |
| ROOM_PRICE             |    NUMBER     | 객실가격                |                       NOT NULL                        |
| CHECK_IN               | VARCHAR2(10)  | 체크인 시간             |                       NOT NULL                        |
| CHECK_OUT              | VARCHAR2(10)  | 체크아웃 시간           |                       NOT NULL                        |
| ROOM_STANDARD_PEOPLE   |    NUMBER     | 기준인원                |                       NOT NULL                        |
| ROOM_MAX_PEOPLE        |    NUMBER     | 최대인원                |                       NOT NULL                        |
| ROOM_COUNT             |    NUMBER     | 객실 수                 |                       NOT NULL                        |
| ROOM_DESCRIPTION       | VARCHAR(255)  | 객실설명                |                       NOT NULL                        |
| REGISTERED_DATE        |     DATE      | DEFAULT SYSDATE, 등록일 |                       NOT NULL                        |
| ROOM_ORIGINAL_IMG_NAME | VARCHAR(100)  | 이미지 원본 이름        |                       NOT NULL                        |
| ROOM_CHANGE_IMG_NAME   | VARCHAR2(100) | 이미지 경로             |                       NOT NULL                        |
| ACC_NO                 |    NUMBER     | 숙박업소번호            | FOREIGN KEY ACC_NO REFERENCES ACCOMMODATION, NOT NULL |

### PUBLIC_FACILITIES 공용 시설 테이블

> 데이터 컬럼

| 컬럼명       |  데이터타입  | 설명         |  제약조건   |
| :----------- | :----------: | :----------- | :---------: |
| PUB_FAC_NO   |    NUMBER    | 편의시설번호 | PRIMARY KEY |
| PUB_FAC_NAME | VARCHAR2(30) | 편의시설이름 |  NOT NULL   |

```
- 사우나
- 수영장
- 바베큐
- 레스토랑
- 피트니스
- 물놀이시설
- 공용샤워실
- 공용화장실
- 매점
```

### IN_ROOM_FACILITIES 객실 내 시설 테이블

> 데이터 컬럼

| 컬럼명           |  데이터타입  | 설명           |  제약조건   |
| :--------------- | :----------: | :------------- | :---------: |
| IN_ROOM_FAC_NO   |    NUMBER    | 객실내시설번호 | PRIMARY KEY |
| IN_ROOM_FAC_NAME | VARCHAR2(30) | 객실내시설이름 |  NOT NULL   |

```
- 스파/월풀
- 객실스파
- 미니바
- 무선인터넷
- 에어컨
- 욕실용품
- 샤워실
- 개인콘센트
```

### ETC_FACILITIES 기타 시설 테이블

> 데이터 컬럼

| 컬럼명       |  데이터타입  | 설명         |  제약조건   |
| :----------- | :----------: | :----------- | :---------: |
| ETC_FAC_NO   |    NUMBER    | 기타시설번호 | PRIMARY KEY |
| ETC_FAC_NAME | VARCHAR2(30) | 기타시설이름 |  NOT NULL   |

```
- 조식제공
- 무료주차
- 반려견동반
- 사우나/찜질방
- 객실내취사
- 픽업서비스
- 캠프파이어
- 개인사물함
- 객실내흡연
- 짐보관가능
```

### ACCOMMODATION_TYPE 테이블

> 데이터 컬럼

| 컬럼명        |  데이터타입  | 설명         |  제약조건   |
| :------------ | :----------: | :----------- | :---------: |
| ACC_TYPE_NO   |    NUMBER    | 유형번호     | PRIMARY KEY |
| ACC_TYPE_NAME | VARCHAR2(30) | 객실유형이름 |  NOT NULL   |

```
- 모텔
- 호텔·리조트
- 펜션
- 홈&빌라
- 캠핑
- 게하·한옥
```

## COUPON 쿠폰 테이블

> 데이터 컬럼

| 컬럼명       |  데이터타입  | 설명     |  제약조건   |
| :----------- | :----------: | :------- | :---------: |
| COUPON_NO    |    NUMBER    | 쿠폰번호 | PRIMARY KEY |
| COUPON_NAME  | VARCHAR2(20) | 쿠폰명   |  NOT NULL   |
| COUPON_PRICE |    NUMBER    | 쿠폰가격 |  NOT NULL   |

## COUPON_DETAILS 쿠폰 내역 테이블

> 데이터 컬럼

| 컬럼명             | 데이터타입 | 설명                            |                     제약조건                      |
| :----------------- | :--------: | :------------------------------ | :-----------------------------------------------: |
| COUPON_DETAIL_NO   |   NUMBER   | 쿠폰 내역 번호                  |                    PRIMARY KEY                    |
| COUPON_DETAIL_DATE |    DATE    | DEFAULT SYSDATE, 쿠폰 사용 날짜 |                     NOT NULL                      |
| COUPON_NO          |   NUMBER   | 쿠폰번호                        | FOREIGN KEY COUPON_NO REFERENCES COUPON, NOT NULL |
| MEM_NO             |   NUMBER   | 회원번호                        |  FOREIGN KEY MEM_NO REFERENCES MEMBER, NOT NULL   |

## PAYMENT 결제 테이블

> 데이터 컬럼, 자세한 사항은 Boot Pay API 참조

| 컬럼명          |  데이터타입  | 설명                            |                       제약조건                        |
| :-------------- | :----------: | :------------------------------ | :---------------------------------------------------: |
| PAY_NO          |    NUMBER    | 결제번호                        |                      PRIMARY KEY                      |
| RECEIPT_ID      | VARCHAR(255) | 영수증ID                        |                       NOT NULL                        |
| PAY_PRICE       |    NUMBER    | 결제가격                        |                       NOT NULL                        |
| PAY_DATE        |     DATE     | DEFAULT SYSDATE, 결제일         |                       NOT NULL                        |
| PAY_METHOD      | VARCHAR(50)  | 결제 수단                       |                       NOT NULL                        |
| PAY_STATUS      |    NUMBER    | 결제 상태                       |                       NOT NULL                        |
| PAY_DATE        |     DATE     | DEFAULT SYSDATE, 결제 요청 시간 |                       NOT NULL                        |
| PAY_STATUS_DATE |     DATE     | 결제 상태 변경시간              |                       NOT NULL                        |
| MEM_ID          | VARCHAR2(30) | 회원번호                        |    FOREIGN KEY MEM_ID REFERENCES MEMBER, NOT NULL     |
| RES_CODE        |    NUMBER    | 예약코드                        | FOREIGN KEY RES_CODE REFERENCES RESERVATION, NOT NULL |

## RESERVATION 예약 테이블

> 데이터 컬럼

| 컬럼명         |  데이터타입  | 설명                                   |                          제약조건                          |
| :------------- | :----------: | :------------------------------------- | :--------------------------------------------------------: |
| RES_CODE       | VARCHAR2(10) | 예약코드                               |                        PRIMARY KEY                         |
| MEM_EMAIL      |    NUMBER    | 회원이메일                             |                          NOT NULL                          |
| RES_NAME       | VARCHAR2(20) | 예약자명                               |                          NOT NULL                          |
| RES_PHONE      | VARCHAR2(20) | 예약자 전화번호                        |                          NOT NULL                          |
| CHECK_IN_DATE  |     DATE     | 체크인 날짜                            |                          NOT NULL                          |
| CHECK_OUT_DATE |     DATE     | 체크아웃 날짜                          |                          NOT NULL                          |
| RES_DATE       |     DATE     | DEFAULT SYSDATE, 예약 생성일           |                          NOT NULL                          |
| RES_STATUS     | VARCHAR2(20) | 예약 상태 (예약완료, 처리중, 예약취소) | CHECK(RES_STATUS IN ('COMPLETED', 'PROCESSING', 'CANCEL')) |
| PAY_NO         |    NUMBER    | 결제번호                               |       FOREIGN KEY PAY_NO REFERENCES PAY_NO, NOT NULL       |
| ACC_NO         |    NUMBER    | 숙박업소번호                           |   FOREIGN KEY ACC_NO REFERENCES ACCOMMODATION, NOT NULL    |
| ROOM_NO        |    NUMBER    | 객실번호                               |       FOREIGN KEY ROOM_NO REFERENCES ROOM, NOT NULL        |
| MEM_NO         |    NUMBER    | 회원번호                               |       FOREIGN KEY MEM_NO REFERENCES MEMBER, NOT NULL       |

## LOCATION 지역 테이블

> 데이터 컬럼

| 컬럼명    | 데이터타입  | 설명                |  제약조건   |
| :-------- | :---------: | :------------------ | :---------: |
| LOC_NO    |   NUMBER    | 지역번호            | PRIMARY KEY |
| LOC_NAME  | VARCHAR(10) | 지역명              |  NOT NULL   |
| LOC_COUNT |   NUMBER    | DEFAULT 0, 검색횟수 |  NOT NULL   |

## CART 장바구니 테이블

> 데이터 컬럼

| 컬럼명    | 데이터타입 | 설명                              |                       제약조건                        |
| :-------- | :--------: | :-------------------------------- | :---------------------------------------------------: |
| CART_NO   |   NUMBER   | 장바구니번호                      |                      PRIMARY KEY                      |
| CART_DATE |    DATE    | DEFAULT SYSDATE, 장바구니등록날짜 |                       NOT NULL                        |
| ACC_NO    |   NUMBER   | 숙박업소번호                      | FOREIGN KEY ACC_NO REFERENCES ACCOMMODATION, NOT NULL |
| ROOM_NO   |   NUMBER   | 객실번호                          |     FOREIGN KEY ROOM_NO REFERENCES ROOM, NOT NULL     |
| MEM_NO    |   NUMBER   | 회원번호                          |    FOREIGN KEY MEM_NO REFERENCES MEMBER, NOT NULL     |

## REVIEW 이용 후기 테이블

> 데이터 컬럼

| 컬럼명                |  데이터타입   | 설명                    |                       제약조건                        |
| :-------------------- | :-----------: | :---------------------- | :---------------------------------------------------: |
| REV_NO                |    NUMBER     | 리뷰번호                |                      PRIMARY KEY                      |
| REV_TITLE             | VARCHAR2(255) | 후기 내용               |                                                       |
| REV_ORIGINAL_IMG_NAME | VARCHAR(100)  | 이미지 원본 이름        |                       NOT NULL                        |
| REV_CHANGE_IMG_NAME   | VARCHAR2(100) | 이미지 경로             |                       NOT NULL                        |
| REV_SCORE             |    NUMBER     | 별점                    |                       NOT NULL                        |
| REV_STATUS            | VARCHAR2(10)  | 'PUBLIC' OR 'PRIVATE'   | CHECK(REV_STATUS IN ('PUBLIC', 'PRIVATE')), NOT NULL  |
| REGISTERED_DATE       |     DATE      | DEFAULT SYSDATE, 등록일 |                       NOT NULL                        |
| MEM_NO                |    NUMBER     | 회원번호                |    FOREIGN KEY MEM_NO REFERENCES MEMBER, NOT NULL     |
| ACC_NO                |    NUMBER     | 숙박업소번호            | FOREIGN KEY ACC_NO REFERENCES ACCOMMODATION, NOT NULL |
| ROOM_NO               |    NUMBER     | 객실번호(객실호수X)     |     FOREIGN KEY ROOM_NO REFERENCES ROOM, NOT NULL     |

## DAILY_LOG 일지 테이블

> 데이터 컬럼

| 컬럼명          |  데이터타입   | 설명                    |                    제약조건                    |
| :-------------- | :-----------: | :---------------------- | :--------------------------------------------: |
| DAY_LOG_NO      |    NUMBER     | 일지번호                |                  PRIMARY KEY                   |
| DAY_LOG_TITLE   | VARCHAR2(50)  | 일지제목                |                    NOT NULL                    |
| DAY_LOG_CONTENT | VARCHAR2(255) | 일지내용                |                    NOT NULL                    |
| REGISTERED_DATE |     DATE      | DEFAULT SYSDATE, 등록일 |                    NOT NULL                    |
| MEM_NO          | VARCHAR2(30)  | 회원번호                | FOREIGN KEY MEM_NO REFERENCES MEMBER, NOT NULL |

## ADMIN 관리자 테이블

| 컬럼명         |  데이터타입  | 설명            |  제약조건   |
| :------------- | :----------: | :-------------- | :---------: |
| ADMIN_NO       |    NUMBER    | 관리자 고유번호 | PRIMARY KEY |
| ADMIN_ID       | VARCHAR2(20) | 관리자 ID       |   UNIQUE    |
| ADMIN_PASSWORD | VARCHAR2(30) | 관리자 비밀번호 |  NOT NULL   |
| ADMIN_EMAIL    | VARCHAR2(30) | 관리자 이메일   |   UNIQUE    |

## CHAT_ROOM 채팅방 테이블

> 데이터 컬럼

| 컬럼명          |  데이터타입  | 설명                                       |                           제약조건                            |
| :-------------- | :----------: | :----------------------------------------- | :-----------------------------------------------------------: |
| CHAT_ROOM_NO    |    NUMBER    | 채팅방번호                                 |                          PRIMARY KEY                          |
| CHAT_CATEGORY   | VARCHAR2(20) | 문의 카테고리. '기타문의', '예약문의' 중 1 |     CHECK (CHAT_CATEGORY IN ('RESERVE', 'ETC')), NOT NULL     |
| REGISTERED_DATE |     DATE     | DEFAULT SYSDATE, 등록일                    |                           NOT NULL                            |
| MEM_EMAIL       |    NUMBER    | 채팅 대상 이메일                           | FOREIGN KEY MEM_EMAIL REFERENCES MEMBER (MEM_EMAIL), NOT NULL |
| ADMIN_NO        |    NUMBER    | 담당 관리자 번호                           |        FOREIGN KEY ADMIN_NO REFERENCES ADMIN, NOT NULL        |

## CHAT_MESSAGE 채팅 메시지 테이블

> 데이터 컬럼

| 컬럼명          |  데이터타입   | 설명                       |                             제약조건                             |
| :-------------- | :-----------: | :------------------------- | :--------------------------------------------------------------: |
| MESSAGE_NO      |    NUMBER     | 메시지번호                 |                           PRIMARY KEY                            |
| MESSAGE_CONTENT | VARCHAR2(255) | 채팅메시지                 |                             NOT NULL                             |
| CHAT_SEND_DATE  |     DATE      | DEFAULT SYSDATE, 보낸 날짜 |                             NOT NULL                             |
| CHAT_ROOM_NO    |    NUMBER     | 채팅방번호                 |     FOREIGN KEY CHAT_ROOM_NO REFERENCES CHAT_ROOM, NOT NULL      |
| SENDER_EMAIL    |    NUMBER     | 메시지 보낸 사용자 이메일  | FOREIGN KEY SENDER_EMAIL REFERENCES MEMBER (MEM_EMAIL), NOT NULL |
